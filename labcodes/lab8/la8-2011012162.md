
### 练习1: 完成读文件操作的实现（需要编码）

1. 实现过程

>使用了`sfs_bmap_load_nolock`函数对磁盘的block编号进行检索，使用`sfs_buf_op`和`sfs_block_op`对数据进行读写，其中`sfs_buf_op`对少量数据进行操作，`sfs_block_op`对整个`block`数据进行读写。

2. 设计实现”UNIX的PIPE机制“的概要设方案

>pipeline的执行机制是：
>* `proc_struct`增加一个变量，表示当前进程是否是`pipeline`的程序，记录这个进程发送接收的内存地址。
>* 为所有的管程建立一个内存的缓冲区。
>* 为所有程序创建一个新的进程，记录发送接收的内存地址。
>* 在`write/read syscall`中增加判断，将`stdin`和`stdout`定向到内存缓冲区中。
>* 关于同步的问题，使用`producer/consumer`模式，保持数据的同步不冲突。
    

### 练习2: 完成基于文件系统的执行程序机制的实现（需要编码）

1. 实现过程：

>多次调用`load_icode_read`,加载执行程序，具体实现过程主要参看注释。

2. 设计实现基于”UNIX的硬链接和软链接机制“的概要设方案

>* 增加数据结构表示`symbolic/hard link`, 在fs的inode增加计数域， 统计有多少`hard link`指向当前`inode`。
>* 新建软连接，将`vfs`中`symbolic link`创建对应的节点`symbolic inode`，同时建立双向的链接，当`inode`删除时要对计数变量进行维护。
>* 新建硬链接，和之前一样建立双向的链接，删除的时候，应当先判断`innode`有多少硬链接，只有引用数为0才进行删除。


### 与参考答案的不同

>* 在`sfs_inode`中的实现细节和具体语句的实现略有不同。
>* `proc.c`中`load_icode`同时参考了注释和答案的实现。

### 知识点

>* 文件系统的整体结构：系统调用，虚拟文件系统，文件系统，底层的IO驱动。




